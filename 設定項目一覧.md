# SatoTrip-AI 設定項目一覧

このドキュメントでは、SatoTrip-AIアプリケーションで設定が必要な全ての項目をまとめています。

---

## フロントエンド設定

フロントエンドの環境変数は、プロジェクトルートに `.env` または `.env.local` ファイルを作成して設定します。

### 設定ファイルの場所
```
/home/ubuntu/SatoTrip-AI/.env
```

### 設定項目

| 変数名 | 説明 | デフォルト値 | 必須 | 取得方法 |
|--------|------|-------------|------|----------|
| `VITE_API_BASE_URL` | バックエンドAPIのベースURL | `http://localhost:8000` | いいえ | - |
| `VITE_IS_DEMO_MODE` | デモモードフラグ（`true`でモックデータを使用） | `false` | いいえ | - |

### 設定例

```bash
# .env または .env.local
VITE_API_BASE_URL=http://localhost:8000
VITE_IS_DEMO_MODE=false
```

**現在の状態**: フロントエンドの `.env` ファイルは未作成です。デフォルト値で動作しています。

---

## バックエンド設定

バックエンドの環境変数は、`backend/` ディレクトリに `.env` ファイルを作成して設定します。

### 設定ファイルの場所
```
/home/ubuntu/SatoTrip-AI/backend/.env
```

### 必須設定項目

| 変数名 | 説明 | デフォルト値 | 必須 | 取得方法 |
|--------|------|-------------|------|----------|
| `GEMINI_API_KEY` | Google Gemini APIキー（AI機能に必須） | （空） | **はい** | [https://aistudio.google.com/app/apikey](https://aistudio.google.com/app/apikey) |
| `JWT_SECRET_KEY` | JWT署名用の秘密鍵 | `your-secret-key-change-in-production` | 本番環境で必須 | `openssl rand -hex 32` で生成 |

### オプション設定項目（基本）

| 変数名 | 説明 | デフォルト値 | 必須 | 取得方法 |
|--------|------|-------------|------|----------|
| `DATABASE_URL` | データベース接続URL | `sqlite:///./data/satotrip.db` | いいえ | - |
| `JWT_ALGORITHM` | JWTアルゴリズム | `HS256` | いいえ | - |
| `JWT_EXPIRATION_HOURS` | JWTトークンの有効期限（時間） | `24` | いいえ | - |
| `CORS_ORIGINS` | CORS許可オリジン（カンマ区切り） | `http://localhost:3000,http://localhost:5173` | いいえ | - |
| `ENVIRONMENT` | 実行環境（development/production） | `development` | いいえ | - |

### オプション設定項目（データ収集機能）

| 変数名 | 説明 | デフォルト値 | 必須 | 取得方法 |
|--------|------|-------------|------|----------|
| `DATA_COLLECTION_ENABLED` | データ収集機能の有効/無効 | `False` | いいえ | - |
| `YOUTUBE_API_KEY` | YouTube Data APIキー | （空） | データ収集機能使用時 | [https://console.cloud.google.com/apis/credentials](https://console.cloud.google.com/apis/credentials) |
| `OPENCAGE_API_KEY` | OpenCage Geocoding APIキー | （空） | 位置情報取得使用時 | [https://opencagedata.com/api](https://opencagedata.com/api) |
| `GOOGLE_MAPS_API_KEY` | Google Maps APIキー | （空） | ジオコーディング使用時 | [https://console.cloud.google.com/apis/credentials](https://console.cloud.google.com/apis/credentials) |

### オプション設定項目（一括追加設定）

| 変数名 | 説明 | デフォルト値 |
|--------|------|-------------|
| `BULK_ADD_DEFAULT_MAX_RESULTS_PER_KEYWORD` | キーワードあたりの最大結果数 | `3` |
| `BULK_ADD_DEFAULT_MAX_KEYWORDS` | 最大キーワード数 | `20` |
| `BULK_ADD_DEFAULT_MAX_VIDEOS` | 最大動画数 | `30` |
| `BULK_ADD_LOCATION_DEFAULT` | 位置情報取得のデフォルト | `True` |
| `BULK_ADD_ENABLE_BACKGROUND_JOBS` | バックグラウンドジョブの有効化 | `True` |
| `BULK_ADD_HARD_MAX_RESULTS_PER_KEYWORD` | キーワードあたりの強制上限 | `10` |
| `BULK_ADD_HARD_MAX_KEYWORDS` | キーワード数の強制上限 | `200` |
| `BULK_ADD_HARD_MAX_VIDEOS` | 動画数の強制上限 | `300` |

### 設定例（最小構成）

```bash
# backend/.env
DATABASE_URL=sqlite:///./data/satotrip.db
JWT_SECRET_KEY=dev-secret-key-for-testing-only
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
GEMINI_API_KEY=your-gemini-api-key-here
YOUTUBE_API_KEY=
OPENCAGE_API_KEY=
GOOGLE_MAPS_API_KEY=
DATA_COLLECTION_ENABLED=False
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
ENVIRONMENT=development
```

### 設定例（本番環境）

```bash
# backend/.env
DATABASE_URL=postgresql://user:password@localhost/satotrip
JWT_SECRET_KEY=<openssl rand -hex 32で生成した強力な秘密鍵>
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
GEMINI_API_KEY=<実際のGemini APIキー>
YOUTUBE_API_KEY=<実際のYouTube APIキー>
OPENCAGE_API_KEY=<実際のOpenCage APIキー>
GOOGLE_MAPS_API_KEY=<実際のGoogle Maps APIキー>
DATA_COLLECTION_ENABLED=True
CORS_ORIGINS=https://your-frontend-domain.com
ENVIRONMENT=production
```

**現在の状態**: バックエンドの `.env` ファイルは作成済みですが、`GEMINI_API_KEY` が未設定のため、AI機能は動作しません。

---

## 現在の設定状況

### フロントエンド
- ✅ 依存関係インストール済み
- ⚠️ `.env` ファイル未作成（デフォルト値で動作中）
- ✅ 開発サーバー稼働中: https://3000-icnhnoxwa24ugnfefujvm-3e9d0658.manus-asia.computer

### バックエンド
- ✅ 依存関係インストール済み
- ✅ `.env` ファイル作成済み
- ⚠️ `GEMINI_API_KEY` 未設定（AI機能は動作しません）
- ✅ データベース初期化済み
- ✅ 開発サーバー稼働中: https://8000-icnhnoxwa24ugnfefujvm-3e9d0658.manus-asia.computer

---

## 次のステップ

### 最低限必要な設定

1. **Gemini APIキーの取得と設定**
   - [https://aistudio.google.com/app/apikey](https://aistudio.google.com/app/apikey) でAPIキーを取得
   - `backend/.env` の `GEMINI_API_KEY` に設定
   - バックエンドサーバーを再起動

### オプション設定（必要に応じて）

2. **フロントエンドの環境変数設定**
   - プロジェクトルートに `.env` ファイルを作成
   - `VITE_API_BASE_URL` にバックエンドのURLを設定（現在は `https://8000-icnhnoxwa24ugnfefujvm-3e9d0658.manus-asia.computer`）

3. **データ収集機能を使用する場合**
   - YouTube APIキーを取得して設定
   - OpenCage APIキーを取得して設定
   - `DATA_COLLECTION_ENABLED=True` に設定

4. **本番環境にデプロイする場合**
   - `JWT_SECRET_KEY` を強力な値に変更（`openssl rand -hex 32`）
   - `ENVIRONMENT=production` に設定
   - PostgreSQLなどの本番用データベースに変更
   - `CORS_ORIGINS` を実際のフロントエンドURLに変更

---

## セキュリティに関する注意事項

- **`.env` ファイルはGitにコミットしないでください**（`.gitignore` に含まれています）
- **本番環境では必ず `JWT_SECRET_KEY` を強力な値に変更してください**
- **APIキーは外部に公開しないでください**
- **フロントエンドにはAPIキーを含めないでください**（バックエンドで管理）
